prefix andb: <https://iisg.amsterdam/vocab/adb-andb/>
prefix dct: <http://purl.org/dc/terms/>
prefix geo: <http://www.opengis.net/ont/geosparql#>
prefix graph: <https://iisg.amsterdam/resource/adb-andb/graph/>
prefix occupation: <https://iisg.amsterdam/resource/adb-andb/occupation/>
prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#>
prefix schema: <https://schema.org/>
prefix sex: <https://iisg.amsterdam/resource/adb-andb/sex/>
prefix sh: <http://www.w3.org/ns/shacl#>
prefix shape: <https://iisg.amsterdam/resource/adb-andb/shape/>
prefix time: <http://www.w3.org/2006/time#>
prefix xsd: <http://www.w3.org/2001/XMLSchema#>
@prefix hg: <http://rdf.histograph.io/>

graph:shapes {
  
  shape:Person
    sh:property
      [ sh:datatype xsd:string;
        sh:path schema:givenName;
        sh:name "has first name"@en;
        sh:description "The person's given name(s)";
        dct:source "unique/first_name";
        sh:order 0 ;
		sh:group andb:NameGroup ],
      [ sh:datatype xsd:string;
        sh:path schema:additionalName;
        sh:name "has middle name"@en;
        sh:description "The person's middle name";
        dct:source "unique/middle_name";
        sh:order 1 ;
		sh:group andb:NameGroup ],
      [ sh:datatype xsd:string;
        sh:path schema:familyName;
        sh:name "has last name"@en;
        sh:description "The person's last name";
        dct:source "unique/last_name";
        sh:order 2 ;
		sh:group andb:NameGroup ],
      [ sh:datatype xsd:string;
        sh:path andb:maidenNamePrefix;
        sh:name "has maiden middle name"@en;
        sh:description "The person's maiden name's middle name";
        dct:source "unique/maiden_name_prefix";
        sh:order 3 ;
		sh:group andb:NameGroup ],
      [ sh:datatype xsd:string;
        sh:path andb:maidenName;
        sh:name "has maiden name"@en;
        sh:description "unique/The person's maiden name";
        dct:source "maiden_name";
        sh:order 4 ;
		sh:group andb:NameGroup ],
      [ sh:in ( schema:Female schema:Male );
        sh:path schema:gender;
        sh:name "has gender"@en;
        sh:description "The person's gender, in this case male or female";
        dct:source "unique/gender" ],
      [ sh:datatype xsd:date;
        sh:path schema:birthDate;
        sh:name "has birth date"@en;
        sh:description "The person's birth date";
        dct:source "unique/birth_date" ],
      [ sh:datatype xsd:string;
         sh:path schema:birthPlace;
         sh:name "has birth place"@en;
         sh:description "The person's place of birth";
         dct:source "unique/mbr_birth_place" ],
      [ sh:datatype xsd:date;
        sh:name "has death date"@en;
        sh:description "The person's death date";
        sh:path schema:deathDate;
        dct:source "unique/death_date" ],
      [ sh:datatype xsd:date;
        sh:name "has death date according to oorlogslevens.nl"@en;
        sh:description "The person's death date according to oorlogslevens.nl";
        sh:path andb:claimedDeathDate;
        dct:source "unique/oorlogslevens_deathDate" ],
      [ sh:datatype xsd:string;
        sh:path andb:claimedDeathPlace;
        sh:name "has death place"@en;
        sh:description "The person's place of death";
        dct:source "unique/oorlogslevens_deathPlace" ],
      [ sh:datatype xsd:string;
        sh:path andb:cardId; 
        sh:name "has card"@en;
        sh:description "The person's card(s)";
        dct:source "unique/adb_identifier",
                   "unique/sdn_adm_id1",
        		   "unique/sdn_adm_id2",
        		   "unique/sdn_adm_id3",
        		   "unique/mbr_adm_id1",
        		   "unique/mbr_adm_id2",
        		   "unique/mbr_adm_id3";
        sh:minCount 1 ],
      [ sh:datatype xsd:anyURI;
        sh:path owl:sameAs;
        sh:name "has bio on oorlogslevens.nl"@en;
        sh:description "The person's biography on oorlogslevens.nl";
        dct:source "unique/oorlogslevens_uri" ],

        
      # familierelaties, source: leerlingkaart
      # brother(s): hiervan weten we alleen het kaartnummer (niet de adm_id) (heet un_number_brother, maar doelt op card_id)
      # sister(s): hiervan weten we alleen het kaartnummer (niet de adm_id)(heet un_number_sister, maar doelt op card_id)
      # [ sh:class schema:Person;
          sh:path andb:sister ],
      # son/daughter: persoon is zoon of dochter van parent
      # father/mother: ouder van deze persoon is vader of moeder 
      # parent: persoonsgegevens van ouder (naam/geboortedatum/membership)
      # [ sh:class schema:Person;
          sh:path andb:son ],
      # [ sh:class schema:Person;
      #   sh:maxCount 2;
      #   sh:path bio:parent ],
      # [ sh:class schema:Person;
      #   sh:maxCount 1;
      #  sh:path bio:mother ],
      # [ sh:class schema:Person;
      #   sh:maxCount 1;
      #  sh:path bio:father ], 
      
      # familierelaties, source: lidmaatschapskaart ADB
      # marriage: persoonsgegevens van echtgeno(o)t(e) (naam/geboortedatum), trouwdatum
      # [ sh:class bio:Marriage;
        sh:path andb:marriage ],
      # children: persoonsgegevens van de kinderen (naam/geboortedatum),
      # son/daughter: persoon is zoon of dochter van parent
      # father/mother: ouder van deze persoon is vader of moeder
      # parent: persoonsgegevens van ouder (naam/geboortedatum/opmerkingen)
         
      #membership, source: alle kaarten
      # [ sh:class andb:Membership;
          sh:path andb:membership ],

      # {givenName} {middleName} {familyName}
      shape:label;
    sh:targetClass schema:Person.
        
  shape:Card
    sh:property
      shape:Residency,
      shape:Education,
      shape:Membership,
      shape:Family,
      shape:Remarks,
      shape:Image,
      [ sh:class schema:Person;
        sh:path andb:aboutBrother ],
      [ sh:class schema:Person;
        sh:path andb:aboutChild ],
      [ sh:class andb:Examination;
        sh:path andb:aboutExamination ],
      [ sh:class andb:Marriage;
        sh:path andb:aboutMarriage ],
      [ sh:class andb:Membership;
        sh:path andb:aboutMembership ],
      [ sh:class andb:Parent;
        sh:path andb:aboutParent ],
      [ sh:class andb:Residency;
        sh:path andb:aboutResidency ],
      [ sh:class schema:Person;
        sh:path andb:aboutSister ],
      [ sh:class schema:Person;
        sh:path andb:aboutSpouse ],
      [ sh:class schema:Person;
        sh:path andb:aboutStudent ],
      [ sh:class schema:Person;
        sh:path andb:aboutWorker ],
      [ sh:class andb:WorkEvent;
        sh:path andb:aboutWorkEvent ],
      [ dct:source "adb:adm_image_uuid";
        sh:class schema:ImageObject;
        sh:description "Every card must have exactly one image."@en;
        sh:maxCount 1;
        sh:minCount 1;
        sh:path schema:image ],
      [ sh:class andb:Remark;
        sh:description "Cards can have zero or more remarks."@en;
        sh:path andb:remark ], #[ sh:inversePath oa:hasTarget ],
      # card {identifier}
      # kaart {identifier}
      shape:label;
    sh:targetClass andb:Card.
    
  shape:Residency
    sh:property
      [ sh:class schema:Person;
        sh:path andb:inhabitant;
        sh:name "has inhabitant"@en;
        sh:description "The residency's inhabitant"; ],
      shape:Address,
      
      shape:moveAction
      shape:after,
      shape:before,
      # Bewoning van {inhabitant} in {address}
      # Residency of {inhabitant} at {address}
      shape:label;
    sh:targetClass schema:Residence.
     
  shape:Address
    sh:property
      shape:Street,
      [ sh:datatype xsd:string;
        sh:path andb:houseNumber;
        sh:name "has house number"@en;
        sh:description "The house number of the address";
        dct:source 
        "adb/mbr_street_no-01 t/m 5",
        "andb/mbr_street_no-01 t/m 26",
        "apprentice/sdn_street_no-01 t/m 5",
        "apprentice/wsp_street_no-01 t/m 10";
        sh:order 1 ;
		sh:group andb:AddressGroup ],
      [ sh:datatype xsd:string;
        sh:path andb:houseNumberAddition;
        sh:name "has addition to house number"@en;
        sh:description "The house number addition of the address";
        dct:source 
        "adb/mbr_street_no_add-01 t/m 5",
        "andb/mbr_street_no_add-01 t/m 26",
        "apprentice/sdn_street_no_add-01 t/m 5",
        "apprentice/wsp_street_no_add-01 t/m 10";
        sh:order 2 ;
		sh:group andb:AddressGroup ],
      [ sh:datatype xsd:anyURI;
        sh:path schema:identifier;
        sh:name "has hisgis identifier"@en;
        sh:description "The HISGIS identifier of the address";
        dct:source 
        "apprentice/sdn_address_locationPoint-01 t/m 5",
        "andb/mbr_address_locationPoint-01 t/m 26" ],
      [ sh:class schema:Place;
        sh:path geo:sfWithin;
        sh:name "is within"@en;
        sh:description "Adresses are geospatially within places, not necessarily cities"@en ],
      # {street} {house-number} {house-number-addition}
      shape:label;
    sh:targetClass andb:Address.

  shape:Street
    sh:property
      [ sh:class hgStreet;
        sh:path hg:street;
        sh:name "is a street"@en;
        sh:description "This is a street";
        dct:source 
        "adb/mbr_street-01 t/m 5",
        "andb/mbr_street-01 t/m 26",
        "apprentice/sdn_street-01 t/m 5",
        "apprentice/wsp_street-01 t/m 10" ], 
      [ sh:class andb:Address;
        sh:path andb:partOf;
        sh:name "is part of an address"@en;
        sh:description "Streets are part of an address."@en ],
      [ sh:datatype xsd:anyURI;
        sh:path owl:sameAs;
        sh:name "has adamlink identifier"@en;
        sh:description "The Adamlink identifier of the street";
        dct:source 
        "apprentice/sdn_address_locationPoint-01 t/m 5",
        "andb/mbr_address_locationPoint-01 t/m 26" ],  
      shape:label;
      sh:targetClass andb:Street.
    
  shape:Place
    sh:property
      [ sh:class cshapes:Country;
        sh:description "Places are geospatially within countries."@en;
        sh:path geo:sfWithin ],
      shape:label,
      shape:name; #new
    sh:targetClass schema:Place
    
  shape:Country
    sh:property
      shape:label,
      shape:name; #new
    sh:targetClass andb:Country. #cshapes:Country  
        
      [ sh:in
          ( occupation:brillantslijpen
            occupation:brillantsnijden
            occupation:brillantverstellen
            occupation:kapbewerken
            occupation:klooven
            occupation:roosjesslijpen
            occupation:roosjessnijden
            occupation:roosjesverstellen
            occupation:zagen );
        sh:path andb:occupation ],

      [ sh:class andb:WorkEvent;
        sh:path andb:workEvent ],

      
  shape:Marriage
    sh:property
      [ sh:class schema:Person;
        sh:path andb:spouse ], #bio:partner
      # Huwelijk van {spouse} en {spouse}
      # Marriage of {spouse} and {spouse}
      shape:label;
    sh:targetClass bio:Marriage.
    
  
    

  
  
  shape:Membership
    sh:description "In de ANDB passen we bio:Enrolment toe voor lidmaatschap."@nl;
    sh:property
      [ sh:class schema:Person;
        sh:path andb:member ],
      [ sh:or
          ( [ sh:class andb:Subsection ]
            [ sh:class andb:Section ]
            [ sh:class andb:Union ] );
        sh:path
          [ sh:alternativePath
              ( andb:organization
                andb:union ) ] ],
      shape:after,
      shape:before,
      shape:date,
      # Union membership of {member}
      # Lidmaatschap van {member}
      shape:label;
    sh:targetClass andb:Membership. #bio:Enrolment
  
  shape:Union
    sh:property
      shape:label,
      shape:name;
    sh:targetClass andb:Union.
  
  shape:Section
    sh:property
      [ sh:class andb:Union;
        sh:path andb:partOf ],
      # Union {union}, section {section}
      # Bond {union}, sectie {section}
      shape:label,
      shape:name;
    sh:targetClass andb:Section.
  
  shape:Subsection
    sh:property
      [ sh:class andb:Section;
        sh:path andb:partOf ],
      # Union {union}, section {section}, membership {value}
      # Bond {union}, sectie {section}, lidmaatschap {value}
      shape:label,
      shape:name;
    sh:targetClass andb:Subsection.
  
  shape:Image
    sh:property
      [ sh:datatype xsd:string;
        sh:description "Every image has an MD5 hash code, possibly for validating the image content."@en;
        sh:maxCount 1;
        sh:minCount 1;
        sh:name "has MD5 hash"@en;
        sh:path andb:md5 ],
      [ sh:datatype xsd:nonNegativeInteger;
        sh:description "The size of the image in bytes."@en;
        sh:maxCount 1;
        sh:minCount 1;
        sh:path schema:contentSize ],
      [ sh:datatype xsd:anyURI;
        sh:description """<p lang="en">Every image has exactly one URL where it ca be downloaded from.  The download location has the form <code>http://hdl.handle.net/10796/{adm_image_uuid}</code>.</p>"""^^rdf:HTML;
        sh:maxCount 1;
        sh:minCount 1;
        sh:path schema:contentUrl ],
      [ sh:datatype xsd:string;
        sh:description "The Media Type that is used to encoding the image."@en;
        sh:maxCount 1;
        sh:minCount 1;
        sh:path schema:encodingFormat ],
      [ sh:class schema:ImageObject;
        sh:description "Images have a thumbnail version."@en;
        sh:maxCount 1;
        sh:path schema:thumbnail ],
      [ sh:class schema:ImageObject;
        sh:description "Images have a screen friendly version."@en;
        sh:maxCount 1;
        sh:path andb:screenVersion ],
      # Full image of card {identifier}
      # Volledige afbeelding van kaart {identifier}
      # Screen friendly image of card {identifier}
      # Schermvriendelijke afbeelding van kaart {identifier}
      # Thumbnail image of card {identifier}
      # Miniatuurafbeelding van kaart {identifier}
      shape:label;
    sh:targetClass schema:ImageObject.

  shape:Remark
    sh:property
      [ dct:source
          "adb:par_remarks-01",
          "adb:par_remarks-02",
          "andb:adm_remarks-01",
          "andb:adm_remarks-02",
          "andb:adm_remarks-03",
          "andb:adm_remarks-04",
          "andb:adm_remarks-05",
          "andb:adm_remarks-06",
          "andb:adm_remarks-07";
        sh:datatype xsd:string;
        sh:description "Every remark has exactly one content string."@en;
        sh:maxCount 1;
        sh:minCount 1;
        sh:path andb:content ], #oa:bodyValue
      [ dct:source
          "adb:par_remarks_date-01",
          "adb:par_remarks_date-02",
          "andb:adm_remarks_date-01",
          "andb:adm_remarks_date-02",
          "andb:adm_remarks_date-03",
          "andb:adm_remarks_date-04",
          "andb:adm_remarks_date-05",
          "andb:adm_remarks_date-06",
          "andb:adm_remarks_date-07";
        sh:datatype xsd:string; #xsd:dateTime
        sh:description "Every remark has exactly one date."@en;
        sh:maxCount 1;
        sh:minCount 1;
        sh:path andb:date ]; #dct:created
    sh:targetClass andb:Remark. #oa:Annotation



  shape:WorkEvent
    sh:property
      [ sh:datatype xsd:string;
        sh:path andb:master ],
      [ sh:class andb:Worker;
        sh:path andb:worker ],
      [ sh:class andb:Workshop;
        sh:path andb:workshop ],
      shape:after,
      shape:before,
      shape:date,
      # Admission of {woker} into a workshop with unknown name.
      # Admission of {worker} into workshop {workshop}.
      # Toelating van {worker} tot een onbekende werkplaats.
      # Toelating van {worker} tot werkplaats {workshop}.
      shape:label;
    sh:targetClass andb:WorkEvent. #bio:Employment

  shape:Workshop
    sh:property
      shape:address,
      shape:label,
      shape:name;
    sh:targetClass andb:Workshop.
    
  shape:Examination
    sh:property
      [ sh:datatype xsd:string;
        sh:path andb:examinator ],
      [ sh:class schema:Person;
       sh:path andb:examinee ],
      shape:after,
      shape:before,
      shape:date,
      # Examination of {examinee-name}
      # Examen van {examinee-name}
      shape:label;
    sh:targetClass andb:Examination.
  

  shape:address
    sh:class andb:Address;
    sh:path andb:address.

  shape:after
    sh:class andb:Membership;
    sh:description "Another membership event that occurred directly after this one."@en;
    sh:path time:after.

  shape:before
    sh:class andb:Membership;
    sh:description "Another membership event that occurred directly before this one."@en;
    sh:path time:before.

  shape:date
    sh:property
      [ shape:day;
        sh:minCount 1 ],
      [ shape:month;
        sh:minCount 1 ],
      [ shape:year;
        sh:minCount 1 ];
      # {year}-{month}-{day}
    sh:description "Date structure for all life and workevents."@en;
    sh:maxCount 1;
    sh:targetClass xsd:date.
    
  shape:yearMonth
    sh:property
      [ shape:month;
        sh:minCount 1 ],
      [ shape:year;
        sh:minCount 1 ];
      # {year}-{month}
    sh:description "Date structure for all life and workevents were the day of the month is mising."@en;
    sh:maxCount 1;
    sh:targetClass xsd:gYearMonth.
    
  shape:monthDay
    sh:property
      [ shape:day;
        sh:minCount 1 ],
      [ shape:month;
        sh:minCount 1 ];
      # {month}-{day}
    sh:description "Date structure for all life and workevents were the year is mising."@en;
    sh:maxCount 1;
    sh:targetClass xsd:gMonthDay.  
    
  shape:day
    sh:datatype xsd:gDay;
    dct:source 
      "sdn_addr_day-01",
      "sdn_addr_day-02",
      "sdn_addr_day-03",
      "etc.".
    
  shape:month
    sh:datatype xsd:gMonth;
    dct:source 
      "sdn_addr_month-01",
      "sdn_addr_month-02",
      "sdn_addr_month-03",
      "etc.".
  
  shape:year
    sh:datatype xsd:gYear;
    dct:source 
      "sdn_addr_year-01",
      "sdn_addr_year-02",
      "sdn_addr_year-03",
      "etc.".
    
  shape:date
    sh:property
      [ sh:datatype xsd:nonNegativeInteger;
        sh:path xsd:gDay ],
      [ sh:datatype xsd:nonNegativeInteger;
        sh:path xsd:gMonth ],
      [ sh:datatype xsd:nonNegativeInteger;
        sh:path andb:gYear ],
      # {day}-{month}-{year}
      shape:label;
  sh:description "Events should have at most one date."@en;
    sh:maxCount 1;
    sh:targetClass xsd:date.

  shape:label
    sh:languageIn ( "en" "nl" );
    sh:name "has label"@en;
    sh:description "We try to give every none a human-readable label."@en;
    sh:path rdfs:label.

  shape:name
    sh:datatype xsd:string;
    sh:maxCount 1;
    sh:minCount 1;
    sh:name "has name"@en;
    sh:path schema:name.
    
  andb:NameGroup
	a sh:PropertyGroup ;
	sh:order 0 ;
	rdfs:label "Name" 
}
